<html>
	<head>
		<title>Game:Play Application Launcher</title>
		<script src="js/init.js"></script>
		<link rel="stylesheet" type="text/css" href="css/main.css">
	</head>
	<body data-bind="
		attr: {
			'data-select-scope': currentApp() ? '#current-app-dialog .selectable' : undefined
		}
	">
		<header>
			<div class="logo"><img src="img/GamePlay.svg" title="Game:Play Application Launcher"></div>
			<div class="locale">
				<select size="1" data-bind="value: locale, options: locale.available, optionsValue: 'id', optionsText: 'label'"></select>
			</div>
			<div class="clock">
				<span data-bind="text: currentTimeStr"></span>
			</div>
		</header>

		<div id="widgets">
			<ul data-bind="foreach: gameplay.apps">
				<li class="widget selectable" data-bind="
					attr: {
						'data-app': id
					},
					css: {
						'current-app': $data == $root.currentApp()
					},
					click: $root.currentApp
				">
					<!-- ko if: $data['icon'] -->
						<div class="icon" data-bind="
							style: {
								'background-image': 'url(\'' + $data['icon'] + '\')'
							}
						"></div>
					<!-- /ko -->
					<!-- ko if: $data['icon:selected'] -->
						<div class="icon-selected" data-bind="
							style: {
								'background-image': 'url(' + $data['icon:selected'] + ')'
							}
						"></div>
					<!-- /ko -->
					<div class="label" data-bind="text: label"></div>
				</li>
			</ul>
		</div>
		<div id="copyright-notice">
			<!-- Text filled by theme.css -->
			<div class="copyright-notice-background"></div>
			<div class="copyright-notice-icons"></div>
			<div class="copyright-notice-other"></div>
		</div>

		<!-- ko if: currentApp -->
			<div id="current-app-dialog" class="dialog">
				<!-- ko with: currentApp -->
					<div class="dialog-label" data-bind="text: label"></div>
					<div class="dialog-content" data-bind="
						style: {
							'background-image': $data['icon'] ? 'url(\'' + $data['icon'] + '\')' : undefined
						}
					">
					</div>
					<div class="dialog-buttons">
						<button class="selectable button-stop" data-bind="click: $root.gameplay.stopApp">Stop</button>
						<button class="selectable button-resume" data-bind="click: $root.gameplay.resumeApp">Resume</button>
						<button class="selectable button-suspend" data-bind="click: $root.gameplay.suspendApp">Suspend</button>
						<button class="selectable button-run" data-bind="click: $root.gameplay.runApp">Run</button>
						<button class="selectable button-close" data-bind="click: function() { $root.currentApp(undefined); }">Close</button>
					</div>
				<!-- /ko -->
			</div>
		<!-- /ko -->

	</body>
</html>
